
## Авторизация

**URL:** `/auth`  
**Метод:** `POST`  
**Описание:** Проверяет корректность пары логин-пароль или регистрирует нового пользователя, если логин не найден. В завершении авторизовывает пользователя
**Представление:** AuthView в файле mireatom/user/view.py

### Параметры запроса:

**Body:**
- `username` (string): Имя пользователя
- `password` (string): Пароль

### Ответы:

**Успех:**
- **Код 201**: Сессия успешно создана.  
  Пример:  
  ```json
  {
    "token": "OExXVXI2Gn3mK9YyIAXi80v1m8c"
  }
**Ошибка:**
- **Код 401**: Неверный пароль

## Сохранение формулы

**URL:** `/library/formula`  
**Метод:** `POST`  
**Описание:** Сохраняет формулу пользователя
**Представление:** FormulaCreationView в файле mireatom/library/view.py

### Параметры запроса:
**Headers:**
- `Authorization` `Bearer {token}` (string): Токен сессии

**Body:**
- `formula` (object): Объект формулы
	 - `value` (string): Значение формулы LaTeX
  Пример:  
  ```json
  {
    "formula": {
	    "value": "a+b"
    }
  }
### Ответы:

**Успех:**
- **Код 201**: Формула успешно создана.  
  Пример:  
  ```json
  {
    "id": "JKEHFdksjFGdhsGhfkdjssfdgsd"
  }
  
## Обновление формулы

**URL:** `/library/formula/{id_формулы}`  
**Метод:** `PATCH`  
**Описание:** Обновляет формулу пользователя
**Представление:** FormulaView в файле mireatom/library/view.py

### Параметры запроса:
**Headers:**
- `Authorization` `Bearer {token}` (string): Токен сессии

**Body:**
- `formula` (object): Объект формулы
	 - `value` (string): Значение формулы LaTeX
	 - `name` (string): Название формулы
	 - `variables` (array): Массив названий переменных. Объекты вида ``` {"value": "a", "name": "Ускорение"} ```
 
		 Параметры являются *необязательными*. Обновляются только те поля, что были переданы
		 
	Пример:  
  ```json
  {
    "formula": {
        "value": "a+b",
        "name": "Название",
        "variables": [{
            "value": "a",
            "name": "Ускорение"
        }]
    }
  }

### Ответы:

**Успех:**
- **Код 204**: Формула успешно обновлена. 

## Оценка времени анализа формулы

**URL:** `/library/formula/{id_формулы}/analysis/time`  
**Метод:** `GET`  
**Описание:** Возвращает примерно время анализа формулы пользователя
**Представление:** EstimateOperatingTimeView в файле mireatom/library/view.py

### Параметры запроса:
**Headers:**
- `Authorization` `Bearer {token}` (string): Токен сессии

### Ответы:

**Успех:**
- **Код 200**: Формула успешно оценена. 
**Body**
	 - `time` (number): Примерное время анализа формулы пользователя в *миллисекундах*
	 Пример:  
  ```json
  {
    "time": 1033
  }
  
## Анализ формулы

**URL:** `/library/formula/{id_формулы}/analysis`  
**Метод:** `POST`  
**Описание:** Анализирует формулу пользователя
**Представление:** FormulaAnalysisView в файле mireatom/library/view.py

### Параметры запроса:
**Headers:**
- `Authorization` `Bearer {token}` (string): Токен сессии

### Ответы:

**Успех:**
- **Код 200**: Формула успешно проанализирована. 
**Body**
	 - `match` (array): Массив объектов совпадений. `value` -- совпавшая формула, `indexes` -- массив индексов совпавших подстрок (концы включительно). `original` -- в формуле пользователя, `found` -- в формуле из БД
	
	Пример:  
  ```json
  {
    "match": [{
        "value": "b+a",
        "indexes": [{
            "original": "0:1", 
            "found": "0:1"
        }]
    }]
  }
  
## Получение формулы

**URL:** `/library/formula/{id_формулы}`  
**Метод:** `GET`  
**Описание:** Получение информации о формуле
**Представление:** FormulaView в файле mireatom/library/view.py

### Параметры запроса:
**Headers:**
- `Authorization` `Bearer {token}` (string): Токен сессии

### Ответы:

**Успех:**
- **Код 200**: Формулы успешно найдены.
 **Body:**
  `formula` (object): Объект формулы
	 - `value` (string): Значение формулы LaTeX
	 - `name` (string): Название формулы
	 - `variables` (array): Массив названий переменных. Объекты вида ``` {"value": "a", "name": "Ускорение"} ```
	 
  Пример:  
  ```json
  {
    "formula": {
        "value": "a+b",
        "name": "Название",
        "variables": [{
            "value": "a",
            "name": "Ускорение"
        }]
    }
  }
**Ошибка:**
- **Код 404**: Формула не существует.

## Получение всех публичных формул

**URL:** `/library/formulas`  
**Метод:** `GET`  
**Описание:** Получение информации о формулах
**Представление:** GetFormulasListView в файле mireatom/library/view.py

### Параметры запроса:
**GET-Paremeters:**
- `limit` (number): Количество формул на одной странице
- `page` (number): Номер страницы

**Headers:**
- `Authorization` `Bearer {token}` (string): Токен сессии

### Ответы:

**Успех:**
- **Код 200**: Формулы успешно найдены.
 **Body:**
  `formulas` (array): Массив объектов формул
	 - `value` (string): Значение формулы LaTeX
	 - `name` (string): Название формулы
	 - `variables` (array): Массив названий переменных. Объекты вида ``` {"value": "a", "name": "Ускорение"} ```
	 
  Пример:  
  ```json
  {
    "formulas": [{
        "value": "a+b",
        "name": "Название",
        "variables": [{
            "value": "a",
            "name": "Ускорение"
        }]
    }]
  } 

## Получение всех формул текущего пользователя

**URL:** `/library/user/formulas`  
**Метод:** `GET`  
**Описание:** Получение информации о формулах
**Представление:** GetUserFormulasListView в файле mireatom/library/view.py

### Параметры запроса:
**GET-Paremeters:**
- `limit` (number): Количество формул на одной странице
- `page` (number): Номер страницы

### Ответы:

**Успех:**
- **Код 200**: Формула успешно найдена.
 **Body:**
  `formulas` (array): Массив объектов формул
	 - `value` (string): Значение формулы LaTeX
	 - `name` (string): Название формулы
	 - `variables` (array): Массив названий переменных. Объекты вида ``` {"value": "a", "name": "Ускорение"} ```
	 
  Пример:  
  ```json
  {
    "formulas": [{
        "value": "a+b",
        "name": "Название",
        "variables": [{
            "value": "a",
            "name": "Ускорение"
        }]
    }]
  } 
  ```

## Перевод текста с формулами в .docs файл

**URL:** `/text/`  
**Метод:** `POST`  
**Описание:** Генерация .docs файла из переданного текста с формулами.
**Представление:** DocsCreationView в файле mireatom/text_engine/view.py

### Параметры запроса:
**Body:**
- `text` (string): Текст с формулами, где %<id>% обозначает, id вставленной формулы
  Пример:  
  ```json
  {
    "text": "Формула 1: %<1>%. Формула 2: %<2>%."
  }

### Ответы:

**Успех:**
- Возвращает созданный файл
**Ошибка:**
- **Код 404**: Передано неправильное id формулы.  
